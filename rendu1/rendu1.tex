\documentclass[12pt]{article}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[francais]{babel}
\usepackage[top=2cm, bottom=3cm, left=3cm, right=3cm]{geometry}
\usepackage{url}

\title{Chabi Protocole}
\author{
  Cecilia BITOUT, Krimo HAMADI, Pin WANG, \\
  Jérôme SKODA et Joaquim LEFRANC
}

\date{2017}

\begin{document}
\fontfamily{cmr}
\maketitle
\section{Architecture}
\textbf{ATTENTION : Dans tout ce qui suit, le mot ``client'' est utilisé au sens de client TCP, la distinction entre annonceur et utilisateur n'est pas faite. La distinction peut si besoin être faite avec ``Client annonceur''}
\newline

Architecture client/serveur

Serveur:
Stoque les annonces reçues
Envoie les annonces non obsoletes des clients connectés au serveur






Client:
Choisi une des petites annonces proposées par le serveur
(Entre en communication directe avec l'annonceur)

Connexion avec le serveur avec [BonjourChabi]


Conexion

Client qui se connect au serveur

Le serveur ajoute le client dans une liste et lui attribu un ID.

Deconnexion

Le client envoie un [QUIT] ou est déconnecté suite à un timeout.

Toute les annonce du client devienne obsoletes (et donc supprimé)


Poster un annonce

Un client peux créer une annonce en envoyant un

[ANN id\_client titre prix type description]

le serveur répond

[CHABI id\_annonce]


Messagerie

Pour envoyer un message vers un client annonceur, il faut envoyer un
[MES id\_client message]

 au serveur. Le serveur s'occupera de transmetre le message à l'annonceur.

Detruire une annonce

Le client envoie un [DESTROY id\_annonce]
Si l'id client et l'id\_annonce correspondent alors l'annonce est supprimé.

\section{Format des messages}

219 DB  U+2588  █   full block

[CHABI-ANNO█id-annonceur█type█titre█description█prix]

[CHABI-LIST][CHABI-ANNO][CHABI-ANNO][...][CHABI-ANNO][END-CHABI-LIST]

[CHABI-MESS$~id-dest~id-src~id-annon~message]


\end{document}
